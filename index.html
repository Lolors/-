<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>지관 무게 계산기</title>
<style>
  :root {
    --bg:#f9fafb; --card:#fff; --ink:#111827; --muted:#6b7280;
    --okbg:#ecfdf5; --okbd:#34d399;
    --warnbg:#fef2f2; --warnbd:#f87171;
    --bd:#e5e7eb; --btn:#111827;
  }
  body {
    font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    background: var(--bg); color: var(--ink);
    margin: 0; padding: 20px;
  }
  .wrap { max-width: 640px; margin: 0 auto; }
  h1 { font-size: 1.4rem; margin-bottom: 6px; }
  .sub { color: var(--muted); font-size: 0.9rem; margin-bottom: 16px; }
  .card { background: var(--card); border: 1px solid var(--bd);
          border-radius: 14px; padding: 16px; margin-bottom: 14px;
          box-shadow: 0 4px 10px rgba(0,0,0,0.04); }
  label { display:block; font-size:0.9rem; font-weight:600; margin-bottom:4px; }
  input { width:100%; padding:10px 12px; border:1px solid #d1d5db;
          border-radius:8px; font-size:1rem; }
  .row { display:flex; gap:12px; flex-wrap:wrap; }
  .col { flex:1 1 140px; }
  .btnrow { display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; }
  .btn { appearance:none; border:1px solid var(--bd); background:#fff; color:var(--btn);
         padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:600; }
  .btn.primary { background:#111827; color:#fff; border-color:#111827; }
  .btn:active { transform: translateY(1px); }
  .result { margin-top:10px; padding:12px; border-radius:10px;
            background:var(--okbg); border:1px solid var(--okbd);
            font-weight:800; font-size:1.1rem; display:none; }
  .warn { margin-top:10px; padding:10px; border-radius:10px;
          background:var(--warnbg); border:1px solid var(--warnbd);
          color:#b91c1c; font-size:0.95rem; display:none; }
  details { margin-top:10px; font-size:0.9rem; color:var(--muted); }
  .footer { text-align:center; margin-top:20px; font-size:0.8rem; color:var(--muted); }
</style>
</head>
<body>
<div class="wrap">
  <h1>지관 무게 계산기</h1>
  <div class="sub">단위는 <b>cm</b>, 결과는 <b>g</b> (소수점 1자리)로 표시됩니다. 기본 밀도 ρ = <b>0.78 g/cm³</b>입니다.</div>

  <div class="card">
    <div class="row">
      <div class="col">
        <label>외경 (cm)</label>
        <input id="D2" type="text" inputmode="decimal" placeholder="예: 8.5">
      </div>
      <div class="col">
        <label>내경 (cm)</label>
        <input id="D1" type="text" inputmode="decimal" placeholder="예: 7.5">
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label>길이 (cm)</label>
        <input id="L" type="text" inputmode="decimal" placeholder="예: 7.5">
      </div>
      <div class="col">
        <label>밀도 ρ (g/cm³)</label>
        <input id="rho" type="text" inputmode="decimal" value="0.78">
      </div>
    </div>

    <div class="btnrow">
      <button class="btn primary" id="fill">예시 불러오기</button>
      <button class="btn" id="reset">초기화</button>
      <button class="btn" id="calcBtn">계산하기</button>
    </div>

    <div id="warn" class="warn"></div>
    <div id="out" class="result"></div>
    <details id="detail" style="display:none">
      <summary>계산 과정 확인하기</summary>
      <div id="detailText"></div>
    </details>
    <div class="sub">숫자를 입력하시면 자동으로 계산됩니다.</div>
  </div>

  <div class="footer">© 지관 무게 계산기 · 단일 HTML 파일</div>
</div>

<script>
function parseNum(v){
  if(typeof v !== 'string') return NaN;
  v = v.trim().replace(/,/g,'.').replace(/[^0-9.\\-]/g,'');
  return parseFloat(v);
}
function round1(x){ return Math.round(x*10)/10; }

function calc(){
  const warn = document.getElementById('warn');
  const out = document.getElementById('out');
  const detail = document.getElementById('detail');
  const detailText = document.getElementById('detailText');

  warn.style.display='none'; out.style.display='none'; detail.style.display='none';

  const D2 = parseNum(document.getElementById('D2').value);
  const D1 = parseNum(document.getElementById('D1').value);
  const L  = parseNum(document.getElementById('L').value);
  const rho = parseNum(document.getElementById('rho').value);

  if([D2,D1,L,rho].some(x => isNaN(x))){
    warn.textContent = '모든 항목을 빠짐없이 숫자로 입력해 주십시오.';
    warn.style.display='block'; return;
  }
  if(D2 < D1){
    warn.textContent = '외경은 내경보다 크거나 같아야 합니다.';
    warn.style.display='block'; return;
  }
  if(D2 <= 0 || D1 < 0 || L <= 0 || rho <= 0){
    warn.textContent = '모든 값은 양수여야 합니다.';
    warn.style.display='block'; return;
  }

  const V = Math.PI * L * ((D2*D2 - D1*D1)/4);
  const m = V * rho;

  out.textContent = `지관 무게 = ${round1(m).toFixed(1)} g`;
  out.style.display='block';
  detail.style.display='block';
  detailText.innerHTML =
    `부피 V = π × ${L.toFixed(2)} × ((${D2.toFixed(2)}² − ${D1.toFixed(2)}²)/4) = ${V.toFixed(2)} cm³` +
    `<br>무게 m = V × ρ = ${V.toFixed(2)} × ${rho.toFixed(2)} = ${round1(m).toFixed(1)} g`;
}

function fillExample(){
  document.getElementById('D2').value = '8.5';
  document.getElementById('D1').value = '7.5';
  document.getElementById('L').value  = '8.3';
  document.getElementById('rho').value = '0.78';
  calc();
}
function resetAll(){
  ['D2','D1','L','rho'].forEach(id => document.getElementById(id).value = '');
  document.getElementById('warn').style.display='none';
  document.getElementById('out').style.display='none';
  document.getElementById('detail').style.display='none';
}

['D2','D1','L','rho'].forEach(id => {
  const el = document.getElementById(id);
  el.addEventListener('input', calc, {passive:true});
});
document.getElementById('fill').addEventListener('click', fillExample);
document.getElementById('reset').addEventListener('click', resetAll);
document.getElementById('calcBtn').addEventListener('click', calc);
</script>
</body>
</html>
